<!DOCTYPE html>
<html lang="en">
<head>
                    <!-- Google Fonts and Icons Awesome -->
  <meta http-equiv="content-type" content="text/html; charset=utf-8">  
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet" type="text/css"> 
  <link href="https://fonts.googleapis.com/css?family=Pirata+One" rel="stylesheet" type="text/css">
  <link href='http://fonts.googleapis.com/css?family=Oswald:400,300,700' rel='stylesheet' type='text/css'>

  <!-- Theme styles -->
  <!-- Required css -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="index.css">

  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    
  <!-- Latest compiled and minified JavaScript -->  
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
 
  <title>My Locale Weather</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</head>

  <body>
    <script>
      $(document).ready(function() {

        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var woeidQuery = `SELECT woeid FROM geo.places(1) WHERE text="(${position.coords.latitude},${position.coords.longitude})"`;
            var weathQuery = `https://query.yahooapis.com/v1/public/yql?q=SELECT location, item.condition FROM weather.forecast WHERE woeid IN (${woeidQuery})&format=json`;
              $.getJSON(weathQuery, function(data) {
              var location = data['query']['results']['channel']['location']; 
              var curPlace = location['city'] + ',' + location['region'] + ', ' + location['country'];
              var condition = data['query']['results']['channel']['item']['condition'];
              // console.log(condition);
                $(".place").html('<h4>Your city:<i> ' + curPlace + '</i></h4>');
                $(".currWeather").html('<h4>Curr temperature:<i> ' + condition['temp'] + '&deg;F</i></h4>' + '<h4>Last Update:<i> ' + condition['date'] + '</i></h4>' + '<h4>Code:<i> ' + condition['code'] + '</i></h4>' + '<h4>Curr condition:<i> ' + condition['text'] + '</i></h4>');
            });
          });
        };


      });
    </script>

    <div class="flex-container body-width">
      <h1>My Locale Weather</h1>
    
      <div class="currWeather">
        <h4></h4>
      </div>

      <div class="place">
        <h4></h4>
      </div>

    <div class = "row text-center">
      <div class="col-6">    
        <button iclass = "button cnvrtTemp">To &deg;C</button>
      </div>
    </div>

    </div>    

  </body>
</html>